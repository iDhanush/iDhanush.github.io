<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Detect Telegram In-App Browser</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background: #f9f9f9;
    }
    .result {
      margin-top: 30px;
      font-size: 1.3em;
      padding: 20px;
      background: #fff;
      border-radius: 8px;
      border: 1px solid #ddd;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
      max-width: 500px;
    }
  </style>
</head>
<body>
  <h2>Telegram In-App Browser Detection Demo</h2>
  <div class="result" id="result">Detecting...</div>
  <script>
  function detectTelegramInAppBrowser() {
    var userAgent = navigator.userAgent || '';
    var result = '';
    var isTelegram = false;

    // Detect Telegram in-app browser (Android)
    if (userAgent.includes("Android") && typeof window.TelegramWebview !== 'undefined') {
      result = '‚úÖ Opened inside Telegram In-App Browser (Android)';
      isTelegram = true;
    }
    // Detect Telegram in-app browser (iOS)
    else if (userAgent.includes("iPhone") && typeof window.TelegramWebviewProxy !== 'undefined' && typeof window.TelegramWebviewProxyProto !== 'undefined') {
      result = '‚úÖ Opened inside Telegram In-App Browser (iOS)';
      isTelegram = true;
    }
    // Detect Telegram Webview (generic)
    else if (typeof window.TelegramWebview !== 'undefined' || typeof window.TelegramWebviewProxy !== 'undefined') {
      result = '‚úÖ Opened inside Telegram In-App Browser (unknown platform)';
      isTelegram = true;
    }
    // Chrome or Safari fallback
    else if (/Chrome/i.test(userAgent) && !/Edge|OPR/i.test(userAgent)) {
      result = 'üåê Opened in Google Chrome';
    } else if (/Safari/i.test(userAgent) && !/Chrome|Edge|OPR/i.test(userAgent)) {
      result = 'üåê Opened in Safari';
    } else {
      result = '‚ùå Not opened in Telegram In-App Browser';
    }

    document.getElementById('result').textContent = result;

    // If inside Telegram on Android, try to open the same URL in Chrome using intent
    if (isTelegram && userAgent.includes("Android")) {
      var currentUrl = window.location.href;
      var encodedUrl = currentUrl.replace(/^https?:\/\//, ''); // remove scheme
      var intentUrl = `intent://${encodedUrl}#Intent;package=com.android.chrome;scheme=https;end`;
      window.location.href = intentUrl;
    }
  }

  detectTelegramInAppBrowser();
</script>

</body>
</html>
